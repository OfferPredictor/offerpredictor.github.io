<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>美本录取率预测（中国学生版）</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input, select {
            width: 200px;
            padding: 5px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        .good {
            background-color: #d4edda;
            color: #155724;
        }
        .medium {
            background-color: #fff3cd;
            color: #856404;
        }
        .low {
            background-color: #f8d7da;
            color: #721c24;
        }
        .warning {
            background-color: #ffeeba;
            border-left: 4px solid #ffc107;
        }
    </style>
</head>
<body>
    <h2>美本录取率预测（中国学生版）</h2>
    
    <div class="form-group">
        <label for="toefl">托福成绩 (0-120):</label>
        <input type="number" id="toefl" min="0" max="120" required>
    </div>

    <div class="form-group">
        <label for="gpa">GPA (0-4.0):</label>
        <input type="number" id="gpa" min="0" max="4" step="0.01" required>
    </div>

    <div class="form-group">
        <label for="university">选择大学:</label>
        <select id="university">
            <option value="harvard">哈佛大学</option>
            <option value="stanford">斯坦福大学</option>
            <option value="mit">麻省理工学院</option>
            <option value="ucla">加州大学洛杉矶分校</option>
        </select>
    </div>

    <button onclick="calculateProbability()">预测录取率</button>

    <div id="result"></div>

    <script>
        const totalApplicants = 18000; // 总中国申请人数
        const universityData = {
            harvard: {
                admit: 10,
                minTOEFL: 108,
                avgTOEFL: 113,
                minGPA: 3.8,
                avgGPA: 3.97
            },
            stanford: {
                admit: 46,
                minTOEFL: 105,
                avgTOEFL: 111,
                minGPA: 3.8,
                avgGPA: 3.96
            },
            mit: {
                admit: 14,
                minTOEFL: 110,
                avgTOEFL: 115,
                minGPA: 3.9,
                avgGPA: 3.98
            },
            ucla: {
                admit: 304,
                minTOEFL: 95,
                avgTOEFL: 105,
                minGPA: 3.5,
                avgGPA: 3.85
            }
        };

        function calculateProbability() {
            // 获取输入值
            const toefl = parseInt(document.getElementById('toefl').value);
            const gpa = parseFloat(document.getElementById('gpa').value);
            const university = document.getElementById('university').value;
            
            // 验证输入
            if (!toefl || toefl < 0 || toefl > 120) {
                alert("请输入有效的托福成绩（0-120）");
                return;
            }
            if (!gpa || gpa < 0 || gpa > 4.0) {
                alert("请输入有效的GPA（0-4.0）");
                return;
            }

            // 获取大学数据
            const uni = universityData[university];
            
            // 基础检查：未达最低要求
            if (toefl < uni.minTOEFL || gpa < uni.minGPA) {
                showResult(0.01, university, true);
                return;
            }

            // 计算基础录取率
            const baseRate = (uni.admit / totalApplicants) * 100;

            // 标准化分数计算
            const toeflNorm = Math.min(1, 
                (toefl - uni.minTOEFL) / (uni.avgTOEFL - uni.minTOEFL)
            );
            const gpaNorm = Math.min(1, 
                (gpa - uni.minGPA) / (uni.avgGPA - uni.minGPA)
            );

            // 动态权重调整（托福40% + GPA60%）
            const scoreRatio = 0.4 * toeflNorm + 0.6 * gpaNorm;

            // 概率计算模型
            let probability = baseRate * (1 + 3 * scoreRatio);
            probability = Math.min(probability, baseRate * 4);
            probability = Math.max(probability, baseRate * 0.25);

            // 竞争系数调整
            const competitionFactor = 1 - (uni.avgGPA - gpa) * 0.3;
            probability *= competitionFactor;

            // 最终修正
            probability = Math.min(Math.max(probability, 0.01), 15);

            // 显示结果
            showResult(probability, university);
        }

        function showResult(probability, university, isWarning = false) {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            
            const uniName = document.getElementById('university')
                .options[document.getElementById('university').selectedIndex].text;
            
            resultDiv.innerHTML = `
                <h3>预测结果：${probability.toFixed(2)}%</h3>
                <p>目标学校：${uniName}</p>
                <p>${getAdmissionAdvice(probability)}</p>
                ${isWarning ? '<p class="warning">⚠️ 注意：您的成绩未达到该校最低要求</p>' : ''}
                <p class="warning">⚠️ 提示：实际录取率可能受文书、推荐信、课外活动等因素影响</p>
            `;

            // 设置样式
            resultDiv.className = '';
            if (probability > baseRate * 3) resultDiv.classList.add('good');
            else if (probability > baseRate * 1.5) resultDiv.classList.add('medium');
            else resultDiv.classList.add('low');
        }

        function getAdmissionAdvice(prob) {
            if (prob > 5) return "属于高竞争力区间（前5%申请者）";
            if (prob > 2) return "需要出色软实力补充（前10%申请者）";
            if (prob > 0.5) return "建议搭配3-5所匹配院校申请";
            return "建议重点考虑匹配度更高的学校";
        }
    </script>
</body>
</html>